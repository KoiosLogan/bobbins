{
	admin off # theres no need for the admin api in railway's environment
	persist_config off # storage isn't persistent anyway
	auto_https off # railway handles https for us, this would cause issues if left enabled
	# runtime logs
	log {
		format json # set runtime log format to json mode 
	}
	# server options
	servers {
		trusted_proxies static private_ranges 100.0.0.0/8 # trust railway's proxy
	}
}

:{$PORT:8080} {
    # Serve the React production build from the client/build directory
    root * /app/client/build

    encode zstd gzip

    @static {
        file
    }
    header @static Cache-Control "public, max-age=31536000, immutable"

    try_files {path} {path}/ /index.html

    file_server
}
